(this.webpackJsonpdev=this.webpackJsonpdev||[]).push([[0],{42:function(e,t,n){e.exports=n(71)},47:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),o=n.n(c),i=(n(47),n(3)),l=n(2),u=n(14),s=n(21),m=n.n(s),d=n(5),f=function(){var e=JSON.parse(localStorage.getItem("token"));return console.log(e),m.a.create({headers:{Authorization:e},baseURL:"https://desk-queue.herokuapp.com"})},p=Object(a.createContext)(),h=Object(a.createContext)(),g=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),l=Object(d.a)(i,2),u=l[0],s=l[1];return r.a.createElement(p.Provider,{value:{user:c,setUser:o}},r.a.createElement(h.Provider,{value:{staff:u,setStaff:s}},e.children))},b=n(4);function E(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n"]);return E=function(){return e},e}function v(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return v=function(){return e},e}function x(){var e=Object(i.a)(["\n  margin: 30px 40px 0px 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return x=function(){return e},e}var k=b.a.div(x()),j=b.a.div(v()),O=b.a.button(E()),y=function(){var e=Object(l.f)(),t=Object(a.useContext)(p).setUser,n=Object(u.a)(),c=n.register,o=n.handleSubmit,i=n.errors;return console.log(i),r.a.createElement(k,null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{className:"form",onSubmit:o((function(n){return function(e,t,n){m.a.post("https://desk-queue.herokuapp.com/api/auth/login",e).then((function(a){localStorage.setItem("token",JSON.stringify(a.data.token)),localStorage.setItem("id",a.data.id),console.log(e),n(a.data),a.data.is_helper?t.push("/StaffDashboard"):t.push("/StudentDashboard")})).catch((function(e){console.log(e,"Failed to login")}))}(n,e,t)}))},r.a.createElement(j,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"User Name",name:"username",ref:c({required:!0,max:15,min:2,maxLength:100})}),r.a.createElement("input",{className:"forms",type:"password",placeholder:"Password",name:"password",ref:c({required:!0,max:20,min:2})}),r.a.createElement(O,{type:"submit"},"Login"),r.a.createElement("p",null))))};function S(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n  margin-top: 4% 0;\n"]);return S=function(){return e},e}function w(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return w=function(){return e},e}function N(){var e=Object(i.a)(["\n  margin: 30px 40px 0px 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return N=function(){return e},e}var D=b.a.div(N()),q=b.a.div(w()),L=b.a.button(S());function C(){var e=Object(u.a)(),t=e.register,n=e.handleSubmit,a=e.errors;return console.log(a),r.a.createElement(D,null,r.a.createElement("div",{className:"background"},r.a.createElement("h1",{style:{color:"white"}},"Register"),r.a.createElement("form",{className:"form",onSubmit:n((function(e){return t=e,void f().post("/api/auth/register",t).then((function(e){console.log(e.data,"Registry success")})).catch((function(e){console.log(e,"failed to fetch")}));var t}))},r.a.createElement(q,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"User Name",name:"username",ref:t({required:!0,max:15,min:2,maxLength:100})}),r.a.createElement("br",null),r.a.createElement("input",{className:"forms",type:"password",placeholder:"Password",name:"password",ref:t({required:!0,max:20,min:2})}),r.a.createElement("br",null),r.a.createElement("input",{className:"forms",type:"email",placeholder:"Email",name:"email",re:!0,ref:t({max:25,min:5})}),r.a.createElement("br",null),r.a.createElement("select",{name:"Make Selection",ref:t({required:!0})},r.a.createElement("option",{value:!1},"Student"),r.a.createElement("option",{value:!0},"Staff")),r.a.createElement(L,{className:"forms",type:"submit"},"Sign up!")))))}var T=n(13);function I(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: space-evenly;\n  font-size: 1.5rem;\n  text-decoration: none;\n"]);return I=function(){return e},e}function U(){var e=Object(i.a)(["\n  background: gray;\n"]);return U=function(){return e},e}var F=b.a.div(U()),J=b.a.div(I());function A(){return r.a.createElement(F,null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(J,null,r.a.createElement(T.b,{to:"StudentDashboard",style:{textDecoration:"none",color:"#ef8354"}},"Student Dashboard"),r.a.createElement(T.b,{to:"StaffDashboard",style:{textDecoration:"none",color:"#ef8354"}},"Staff Dashboard"),r.a.createElement(T.b,{to:"/Register",style:{textDecoration:"none",color:"#ef8354"}},"SignUp"),r.a.createElement(T.b,{to:"/",style:{textDecoration:"none",color:"#ef8354"}},"Login")))))}var R=n(41),P=function(e){var t=e.component,n=Object(R.a)(e,["component"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))},z=(n(70),n(1));function B(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n"]);return B=function(){return e},e}function _(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return _=function(){return e},e}function M(){var e=Object(i.a)(["\n  margin: 30px 40px 0px 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return M=function(){return e},e}var W=b.a.div(M()),$=b.a.div(_()),G=(b.a.button(B()),function(e){var t=e.ticket,n=e.setTickets,c=e.tickets,o=Object(a.useState)(!1),i=Object(d.a)(o,2),l=i[0],s=i[1],m=Object(u.a)(),p=m.register,h=m.handleSubmit,g=m.errors;console.log(g);var b=function(e,t){f().put("/api/tickets/".concat(e),t).then((function(a){console.log(a.data),n(c.map((function(n){return n.id===e?t:n}))),s(!l)})).catch((function(e){console.log(e,"Failed to edit Ticket")}))};return!1===l?r.a.createElement("div",null,r.a.createElement("h2",null,t.title," ",t.description," ",t.tried," ",t.category),r.a.createElement("button",{onClick:function(){return e=t.id,void f().delete("/api/tickets/".concat(e)).then((function(t){console.log(t),n(c.filter((function(t){return t.id!==e})))})).catch((function(e){console.log(e,"Failed to delete ticket")}));var e}},"Delete"),r.a.createElement("button",{onClick:function(){return s(!l)}},"Edit")):r.a.createElement("div",null,r.a.createElement(W,null,r.a.createElement("form",{onSubmit:h((function(e){return b(t.id,e)}))},r.a.createElement($,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"Title",name:"title",ref:p({required:!0,min:2,maxLength:80})}),r.a.createElement("textarea",{name:"description",placeholder:"Description",ref:p({required:!0,max:2,maxLength:300})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Tried",name:"tried",ref:p({required:!0,min:2,maxLength:128})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Category",name:"category",ref:p({required:!0,min:2,maxLength:128})}),r.a.createElement("input",{className:"forms",type:"submit"}))),r.a.createElement("button",{onClick:function(){return s(!l)}},"Cancel")))}),H=function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement("h4",null,e.category),r.a.createElement("p",null,e.tried))};function K(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n"]);return K=function(){return e},e}function Q(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return Q=function(){return e},e}function V(){var e=Object(i.a)(["\n  margin: 30px 40px 0px 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return V=function(){return e},e}var X=b.a.div(V()),Y=b.a.div(Q()),Z=b.a.button(K()),ee=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),l=Object(d.a)(i,2),s=l[0],m=l[1];Object(a.useEffect)((function(){!function(e){var t=localStorage.getItem("id");f().get("/api/users/".concat(Number(t),"/tickets")).then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)}))}(),f().get("/api/tickets").then((function(e){console.log(e),m(e.data)})).catch((function(e){console.log(e)}))}),[]);var p=Object(u.a)(),h=p.register,g=p.handleSubmit,b=p.errors;return console.log(b),r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null,r.a.createElement("form",{onSubmit:g((function(e){var t;console.log(e),t=e,f().post("/api/tickets",t).then((function(e){console.log(e.data),m(e.data),o([].concat(Object(z.a)(c),[t]))})).catch((function(e){console.log(e,"Failed to post new ticket")}))}))},r.a.createElement(Y,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"Title",name:"title",ref:h({required:!0,min:2,maxLength:80})}),r.a.createElement("textarea",{name:"description",placeholder:"Description",ref:h({required:!0,max:2,maxLength:300})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Tried",name:"tried",ref:h({required:!0,min:2,maxLength:128})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Category",name:"category",ref:h({required:!0,min:2,maxLength:128})}),r.a.createElement(Z,{className:"forms",type:"submit"},"Submit")))),r.a.createElement("div",null,r.a.createElement("div",{className:"studentList"},s.map((function(e){return r.a.createElement(H,e)})),r.a.createElement("h3",null,"My Tickets"),c.map((function(e,t){return r.a.createElement(G,{ticket:e,setTickets:o,tickets:c})})))))},te=function(){JSON.parse(localStorage.getItem("token"));return r.a.createElement("div",null,r.a.createElement(ee,null))},ne=n(25),ae=function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,e.ticket.title),r.a.createElement("p",null,e.ticket.description),r.a.createElement("h4",null,e.ticket.category),r.a.createElement("p",null,e.ticket.tried),e.ticket.assigned_to?r.a.createElement("h2",null,"Assigned!"):r.a.createElement("button",{onClick:function(){return e.assignTicket(e.ticket)}},"Assign"))},re=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(d.a)(o,2),l=i[0],u=i[1],s=Object(a.useContext)(p).user;Object(a.useEffect)((function(){f().get("/api/tickets").then((function(e){console.log(e.data),c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){f().get("/api/users/".concat(s.id,"/tickets")).then((function(e){console.log(e.data),u(e.data)})).catch((function(e){return console.log(e)}))}),[s]);var m=function(e){f().put("/api/tickets/".concat(e.id),Object(ne.a)(Object(ne.a)({},e),{},{assigned_to:s.id})).then((function(e){console.log(e.data),u([].concat(Object(z.a)(l),[e.data[0]]))})).catch((function(e){return console.log(e)}))};return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(ae,{key:e.id,ticket:e,assignTicket:m})})),r.a.createElement("h2",null,"Assigned Tickets"),l.map((function(e){return r.a.createElement(ae,{key:e.id,ticket:e})})))},ce=function(){JSON.parse(localStorage.getItem("token"));return r.a.createElement("div",null,r.a.createElement(re,null))};function oe(){var e=Object(i.a)(["\n  font-size: 3rem;\n  margin: 5% 0;\n"]);return oe=function(){return e},e}var ie=b.a.div(oe());var le=function(){var e=Object(a.useContext)(p).setUser;return Object(a.useEffect)((function(){var t=localStorage.getItem("id");t&&f().get("/api/users/".concat(Number(t))).then((function(t){e(t.data)})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(ie,{style:{color:"#4F5D75"}},"Devdesk"),r.a.createElement(l.b,{exact:!0,path:"/",component:y}),r.a.createElement(l.b,{path:"/Register",component:C}),r.a.createElement(P,{path:"/StaffDashboard",component:ce}),r.a.createElement(P,{path:"/StudentDashBoard",component:te}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T.a,null,r.a.createElement(g,null,r.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.29215392.chunk.js.map