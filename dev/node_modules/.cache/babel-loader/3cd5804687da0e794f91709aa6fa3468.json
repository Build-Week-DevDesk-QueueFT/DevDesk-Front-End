{"ast":null,"code":"var _jsxFileName = \"/Users/lambda_school_loaner_277/Desktop/coding/DevDesk-Front-End/dev/src/components/student/Student.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport StudentTicketCard from \"../student/StudentTicketCard\";\nimport { UserContext } from \"../../contexts/AppContext\";\nimport { axiosWithAuth } from \"../../utils/axiosWithAuth\";\nimport TicketsCard from \"../staff/TicketCard\";\n\nconst Student = props => {\n  const [tickets, setTickets] = useState([]);\n  const [allTickets, setAllTickets] = useState([]);\n\n  const postNewTicket = newTicket => {\n    axiosWithAuth().post(\"/api/tickets\", newTicket).then(res => {\n      console.log(res.data);\n      setAllTickets(res.data);\n      setTickets([...tickets, newTicket]);\n    }).catch(err => {\n      console.log(err, \"Failed to post new ticket\");\n    });\n  };\n\n  const refreshTicket = props => {\n    const userId = localStorage.getItem(\"id\");\n    axiosWithAuth().get(`/api/users/${Number(userId)}/tickets`).then(res => {\n      console.log(res);\n      setTickets(res.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const refreshAllTicket = props => {\n    axiosWithAuth().get(\"/api/tickets\").then(res => {\n      console.log(res);\n      setAllTickets(res.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    refreshTicket();\n    refreshAllTicket();\n  }, []);\n\n  const submitTicket = data => {\n    console.log(data);\n    postNewTicket(data);\n  };\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  console.log(errors);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(submitTicket),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Title\",\n    name: \"title\",\n    ref: register({\n      required: true,\n      min: 2,\n      maxLength: 80\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"description\",\n    placeholder: \"Description\",\n    ref: register({\n      required: true,\n      max: 2,\n      maxLength: 300\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Tried\",\n    name: \"tried\",\n    ref: register({\n      required: true,\n      min: 2,\n      maxLength: 128\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Category\",\n    name: \"category\",\n    ref: register({\n      required: true,\n      min: 2,\n      maxLength: 128\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"studentList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, allTickets.map(ticket => {\n    return /*#__PURE__*/React.createElement(TicketsCard, Object.assign({}, ticket, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 20\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"My Tickets\"), tickets.map((ticket, index) => /*#__PURE__*/React.createElement(StudentTicketCard, {\n    ticket: ticket,\n    setTickets: setTickets,\n    tickets: tickets,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default Student;","map":{"version":3,"sources":["/Users/lambda_school_loaner_277/Desktop/coding/DevDesk-Front-End/dev/src/components/student/Student.js"],"names":["React","useState","useEffect","useContext","useForm","StudentTicketCard","UserContext","axiosWithAuth","TicketsCard","Student","props","tickets","setTickets","allTickets","setAllTickets","postNewTicket","newTicket","post","then","res","console","log","data","catch","err","refreshTicket","userId","localStorage","getItem","get","Number","error","refreshAllTicket","submitTicket","register","handleSubmit","errors","required","min","maxLength","max","map","ticket","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport StudentTicketCard from \"../student/StudentTicketCard\";\nimport { UserContext } from \"../../contexts/AppContext\";\nimport { axiosWithAuth } from \"../../utils/axiosWithAuth\";\nimport TicketsCard from \"../staff/TicketCard\";\n\nconst Student = (props) => {\n  const [tickets, setTickets] = useState([]);\n  const [allTickets, setAllTickets] = useState([]);\n\n  const postNewTicket = (newTicket) => {\n    axiosWithAuth()\n      .post(\"/api/tickets\", newTicket)\n      .then((res) => {\n        console.log(res.data);\n        setAllTickets(res.data);\n        setTickets([...tickets, newTicket]);\n      })\n      .catch((err) => {\n        console.log(err, \"Failed to post new ticket\");\n      });\n  };\n  const refreshTicket = (props) => {\n    const userId = localStorage.getItem(\"id\");\n    axiosWithAuth()\n      .get(`/api/users/${Number(userId)}/tickets`)\n      .then((res) => {\n        console.log(res);\n        setTickets(res.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n  const refreshAllTicket = (props) => {\n    axiosWithAuth()\n      .get(\"/api/tickets\")\n      .then((res) => {\n        console.log(res);\n        setAllTickets(res.data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    refreshTicket();\n    refreshAllTicket();\n  }, []);\n\n  const submitTicket = (data) => {\n    console.log(data);\n    postNewTicket(data);\n  };\n\n  const { register, handleSubmit, errors } = useForm();\n  console.log(errors);\n\n  return (\n    <>\n      <form onSubmit={handleSubmit(submitTicket)}>\n        <input\n          type=\"text\"\n          placeholder=\"Title\"\n          name=\"title\"\n          ref={register({ required: true, min: 2, maxLength: 80 })}\n        />\n        <textarea\n          name=\"description\"\n          placeholder=\"Description\"\n          ref={register({ required: true, max: 2, maxLength: 300 })}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Tried\"\n          name=\"tried\"\n          ref={register({\n            required: true,\n            min: 2,\n            maxLength: 128,\n          })}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Category\"\n          name=\"category\"\n          ref={register({ required: true, min: 2, maxLength: 128 })}\n        />\n\n        <input type=\"submit\" />\n      </form>\n\n      <div>\n        <div className=\"studentList\">\n          {allTickets.map((ticket) => {\n            return <TicketsCard {...ticket} />;\n          })}\n          <h3>My Tickets</h3>\n          {tickets.map((ticket, index) => (\n            <StudentTicketCard\n              ticket={ticket}\n              setTickets={setTickets}\n              tickets={tickets}\n            />\n          ))}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Student;\n"]},"metadata":{},"sourceType":"module"}