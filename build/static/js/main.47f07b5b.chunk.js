(this.webpackJsonpdev=this.webpackJsonpdev||[]).push([[0],{42:function(e,t,n){e.exports=n(71)},47:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),o=n.n(c),i=(n(47),n(1)),l=n(4),u=n(14),s=n(22),m=n.n(s),d=n(5),f=function(){var e=JSON.parse(localStorage.getItem("token"));return console.log(e),m.a.create({headers:{Authorization:e},baseURL:"https://desk-queue.herokuapp.com"})},p=Object(a.createContext)(),g=Object(a.createContext)(),h=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),l=Object(d.a)(i,2),u=l[0],s=l[1];return r.a.createElement(p.Provider,{value:{user:c,setUser:o}},r.a.createElement(g.Provider,{value:{staff:u,setStaff:s}},e.children))},b=n(2);function E(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n"]);return E=function(){return e},e}function v(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return v=function(){return e},e}function k(){var e=Object(i.a)(["\n  margin: 30px 40px 0px 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return k=function(){return e},e}var x=b.a.div(k()),j=b.a.div(v()),O=b.a.button(E()),y=function(){var e=Object(l.f)(),t=Object(a.useContext)(p).setUser,n=Object(u.a)(),c=n.register,o=n.handleSubmit,i=n.errors;return console.log(i),r.a.createElement(x,null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{className:"form",onSubmit:o((function(n){return function(e,t,n){m.a.post("https://desk-queue.herokuapp.com/api/auth/login",e).then((function(a){localStorage.setItem("token",JSON.stringify(a.data.token)),localStorage.setItem("id",a.data.id),console.log(e),n(a.data),a.data.is_helper?t.push("/StaffDashboard"):t.push("/StudentDashboard")})).catch((function(e){console.log(e,"Failed to login")}))}(n,e,t)}))},r.a.createElement(j,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"User Name",name:"username",ref:c({required:!0,max:15,min:2,maxLength:100})}),r.a.createElement("input",{className:"forms",type:"password",placeholder:"Password",name:"password",ref:c({required:!0,max:20,min:2})}),r.a.createElement(O,{type:"submit"},"Login"),r.a.createElement("p",null))))};function w(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n  margin-top: 4% 0;\n"]);return w=function(){return e},e}function S(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return S=function(){return e},e}function N(){var e=Object(i.a)(["\n  margin: 30px 40px 0px 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return N=function(){return e},e}var T=b.a.div(N()),D=b.a.div(S()),C=b.a.button(w());function q(){var e=Object(u.a)(),t=e.register,n=e.handleSubmit,a=e.errors;return console.log(a),r.a.createElement(T,null,r.a.createElement("div",{className:"background"},r.a.createElement("h1",{style:{color:"white"}},"Register"),r.a.createElement("form",{className:"form",onSubmit:n((function(e){return t=e,void f().post("/api/auth/register",t).then((function(e){console.log(e.data,"Registry success")})).catch((function(e){console.log(e,"failed to fetch")}));var t}))},r.a.createElement(D,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"User Name",name:"username",ref:t({required:!0,max:15,min:2,maxLength:100})}),r.a.createElement("br",null),r.a.createElement("input",{className:"forms",type:"password",placeholder:"Password",name:"password",ref:t({required:!0,max:20,min:2})}),r.a.createElement("br",null),r.a.createElement("input",{className:"forms",type:"email",placeholder:"Email",name:"email",re:!0,ref:t({max:25,min:5})}),r.a.createElement("br",null),r.a.createElement("select",{name:"Make Selection",ref:t({required:!0})},r.a.createElement("option",{value:!1},"Student"),r.a.createElement("option",{value:!0},"Staff")),r.a.createElement(C,{className:"forms",type:"submit"},"Sign up!")))))}var L=n(13);function A(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: space-evenly;\n  font-size: 1.5rem;\n  text-decoration: none;\n"]);return A=function(){return e},e}function I(){var e=Object(i.a)(["\n  background: gray;\n"]);return I=function(){return e},e}var U=b.a.div(I()),R=b.a.div(A());function F(){return r.a.createElement(U,null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(R,null,r.a.createElement(L.b,{to:"StudentDashboard",style:{textDecoration:"none",color:"#ef8354"}},"Student Dashboard"),r.a.createElement(L.b,{to:"StaffDashboard",style:{textDecoration:"none",color:"#ef8354"}},"Staff Dashboard"),r.a.createElement(L.b,{to:"/Register",style:{textDecoration:"none",color:"#ef8354"}},"SignUp"),r.a.createElement(L.b,{to:"/",style:{textDecoration:"none",color:"#ef8354"}},"Login")))))}var _=n(41),z=function(e){var t=e.component,n=Object(_.a)(e,["component"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))},J=(n(70),n(3));function P(){var e=Object(i.a)(["\n  border: 2px solid #ef8354;\n  background: #2d3142;\n  color: #bfc0c0;\n  width: 40%;\n  margin: 0 auto;\n"]);return P=function(){return e},e}function W(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n"]);return W=function(){return e},e}function B(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return B=function(){return e},e}function M(){var e=Object(i.a)(["\n  margin: 30px 40px 0px 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return M=function(){return e},e}var $=b.a.div(M()),G=b.a.div(B()),H=(b.a.button(W()),b.a.div(P())),K=function(e){var t=e.ticket,n=e.setTickets,c=e.tickets,o=Object(a.useState)(!1),i=Object(d.a)(o,2),l=i[0],s=i[1],m=Object(u.a)(),p=m.register,g=m.handleSubmit,h=m.errors;console.log(h);var b=function(e,t){f().put("/api/tickets/".concat(e),t).then((function(a){console.log(a.data),n(c.map((function(n){return n.id===e?t:n}))),s(!l)})).catch((function(e){console.log(e,"Failed to edit Ticket")}))};return!1===l?r.a.createElement(H,null,r.a.createElement("div",null,r.a.createElement("h2",null,t.title," ",t.description," ",t.tried," ",t.category),r.a.createElement("button",{onClick:function(){return e=t.id,void f().delete("/api/tickets/".concat(e)).then((function(t){console.log(t),n(c.filter((function(t){return t.id!==e})))})).catch((function(e){console.log(e,"Failed to delete ticket")}));var e}},"Delete"),r.a.createElement("button",{onClick:function(){return s(!l)}},"Edit"))):r.a.createElement("div",null,r.a.createElement($,null,r.a.createElement("form",{onSubmit:g((function(e){return b(t.id,e)}))},r.a.createElement(G,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"Title",name:"title",ref:p({required:!0,min:2,maxLength:80})}),r.a.createElement("textarea",{name:"description",placeholder:"Description",ref:p({required:!0,max:2,maxLength:300})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Tried",name:"tried",ref:p({required:!0,min:2,maxLength:128})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Category",name:"category",ref:p({required:!0,min:2,maxLength:128})}),r.a.createElement("input",{className:"forms",type:"submit"}))),r.a.createElement("button",{onClick:function(){return s(!l)}},"Cancel")))};function Q(){var e=Object(i.a)(["\n  border: 2px solid #ef8354;\n  background: #2d3142;\n  color: #bfc0c0;\n  width: 40%;\n  margin: 0 auto;\n"]);return Q=function(){return e},e}var V=b.a.div(Q()),X=function(e){return r.a.createElement(V,null,r.a.createElement("div",null,r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement("h4",null,e.category),r.a.createElement("p",null,e.tried)))};function Y(){var e=Object(i.a)(["\n  font-size: 2rem;\n  color: #4f5d75;\n"]);return Y=function(){return e},e}function Z(){var e=Object(i.a)(["\n  background: #ef8354;\n  height: 30px;\n  width: 150px;\n  radius: 20%;\n"]);return Z=function(){return e},e}function ee(){var e=Object(i.a)(["\n  flex-direction: column;\n  justify-content: space-betwen;\n  padding: 10px;\n  margin: 10% auto 10% auto;\n  width: 40%;\n"]);return ee=function(){return e},e}function te(){var e=Object(i.a)(["\n  margin: 30px 40px 10% 380px;\n  justify-content: center;\n  background: #2d3142;\n  color: black;\n  width: 40%;\n  height: 50vh;\n  border: 4px solid #ef8354;\n  border-radius: 25%;\n  color: white;\n"]);return te=function(){return e},e}var ne=b.a.div(te()),ae=b.a.div(ee()),re=b.a.button(Z()),ce=b.a.h2(Y()),oe=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),l=Object(d.a)(i,2),s=l[0],m=l[1];Object(a.useEffect)((function(){!function(e){var t=localStorage.getItem("id");f().get("/api/users/".concat(Number(t),"/tickets")).then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)}))}(),f().get("/api/tickets").then((function(e){console.log(e),m(e.data)})).catch((function(e){console.log(e)}))}),[]);var p=Object(u.a)(),g=p.register,h=p.handleSubmit,b=p.errors;return console.log(b),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,null,r.a.createElement("form",{onSubmit:h((function(e){var t;console.log(e),t=e,f().post("/api/tickets",t).then((function(e){console.log(e.data),m(e.data),o([].concat(Object(J.a)(c),[t]))})).catch((function(e){console.log(e,"Failed to post new ticket")}))}))},r.a.createElement(ae,null,r.a.createElement("input",{className:"forms",type:"text",placeholder:"Title",name:"title",ref:g({required:!0,min:2,maxLength:80})}),r.a.createElement("textarea",{name:"description",placeholder:"Description",ref:g({required:!0,max:2,maxLength:300})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Tried",name:"tried",ref:g({required:!0,min:2,maxLength:128})}),r.a.createElement("input",{className:"forms",type:"text",placeholder:"Category",name:"category",ref:g({required:!0,min:2,maxLength:128})}),r.a.createElement(re,{className:"forms",type:"submit"},"Submit")))),r.a.createElement("div",null,r.a.createElement("div",{className:"studentList"},s.map((function(e){return r.a.createElement(X,e)})),r.a.createElement(ce,null,"My Tickets"),c.map((function(e,t){return r.a.createElement(K,{ticket:e,setTickets:o,tickets:c})})))))},ie=function(){var e=Object(a.useContext)(p).user;return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome, ",e.username,"!"),r.a.createElement(oe,null))},le=n(16);function ue(){var e=Object(i.a)(["\n  border: 2px solid #ef8354;\n  background: #2d3142;\n  color: #bfc0c0;\n  width: 40%;\n  margin: 0 auto;\n"]);return ue=function(){return e},e}var se=b.a.div(ue()),me=function(e){return r.a.createElement(se,null,r.a.createElement("div",null,r.a.createElement("h3",null,e.ticket.title),r.a.createElement("p",null,e.ticket.description),r.a.createElement("h4",null,e.ticket.category),r.a.createElement("p",null,e.ticket.tried),e.ticket.assigned_to?e.ticket.assigned_to==e.user.id?r.a.createElement("button",{onClick:function(){return e.unAssignTicket(e.ticket)}},"UnAssign"):r.a.createElement("h2",null,"Assigned!"):r.a.createElement("button",{onClick:function(){return e.assignTicket(e.ticket)}},"Assign"),e.ticket.resolved||e.ticket.assigned_to!=e.user.id?null:r.a.createElement("button",{onClick:function(){return e.resolveTicket(e.ticket)}},"Resolve Ticket"),r.a.createElement("p",null," Is Ticket Resolved : ",e.ticket.resolved.toString())))};function de(){var e=Object(i.a)(["\n  font-size: 2rem;\n  color: #4f5d75;\n"]);return de=function(){return e},e}var fe=b.a.h2(de()),pe=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(d.a)(o,2),l=i[0],u=i[1],s=Object(a.useContext)(p).user;Object(a.useEffect)((function(){f().get("/api/tickets").then((function(e){console.log(e.data),c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){f().get("/api/users/".concat(s.id,"/tickets")).then((function(e){console.log(e.data),u(e.data)})).catch((function(e){return console.log(e)}))}),[s]);var m=function(e){f().put("/api/tickets/".concat(e.id),Object(le.a)(Object(le.a)({},e),{},{assigned_to:s.id})).then((function(t){console.log(t.data),u([].concat(Object(J.a)(l),[t.data[0]])),c(n.map((function(n){return e.id===n.id?t.data[0]:n})))})).catch((function(e){return console.log(e)}))},g=function(e){f().put("/api/tickets/".concat(e.id),Object(le.a)(Object(le.a)({},e),{},{assigned_to:0})).then((function(t){console.log(t.data),u(l.filter((function(t){return t.id!==e.id}))),c(n.map((function(n){return e.id===n.id?t.data[0]:n})))})).catch((function(e){return console.log(e)}))},h=function(e){f().put("/api/tickets/".concat(e.id),Object(le.a)(Object(le.a)({},e),{},{resolved:!e.resolved})).then((function(t){console.log(t.data),u(n.map((function(n){return e.id===n.id?t.data[0]:n}))),c(n.map((function(n){return e.id===n.id?t.data[0]:n})))})).catch((function(e){return console.log(e)}))};return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(me,{resolveTicket:h,user:s,key:e.id,ticket:e,assignTicket:m,unAssignTicket:g})})),r.a.createElement(fe,null,"Assigned Tickets"),l.map((function(e){return r.a.createElement(me,{user:s,key:e.id,ticket:e,unAssignTicket:g,resolveTicket:h})})))},ge=function(){var e=Object(a.useContext)(p).user;return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome, ",e.username,"!"),r.a.createElement(pe,null))};function he(){var e=Object(i.a)(["\n  font-size: 3rem;\n  margin: 5% 0;\n"]);return he=function(){return e},e}var be=b.a.div(he());var Ee=function(){var e=Object(a.useContext)(p).setUser;return Object(a.useEffect)((function(){var t=localStorage.getItem("id");t&&f().get("/api/users/".concat(Number(t))).then((function(t){e(t.data)})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(F,null),r.a.createElement(be,{style:{color:"#4F5D75"}},"Devdesk"),r.a.createElement(l.b,{exact:!0,path:"/",component:y}),r.a.createElement(l.b,{path:"/Register",component:q}),r.a.createElement(z,{path:"/StaffDashboard",component:ge}),r.a.createElement(z,{path:"/StudentDashBoard",component:ie}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L.a,null,r.a.createElement(h,null,r.a.createElement(Ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.47f07b5b.chunk.js.map